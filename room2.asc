// Flur erster Stock
import function aufz();


/****************************
*   Raum-Funktionen
****************************/
function room_Load()
{
	oTuerEsszimmer.init_object(4);
	oTuerWendy.init_object(3);
	oAufzug.Clickable = false;
	oAufzug.SetView(75);
	hKnoepfe.Enabled = false;
	RemoveWalkableArea(1);
}

function room_AfterFadeIn()
{
	// Bei Bedarf noch Nummer der weiteren Räume hinzufügen
	if ( player.PreviousRoom == 6 || player.PreviousRoom == 2 )
	{
		oAufzug.Animate(0, 10, eOnce, eBlock); // 0 = auf
		RestoreWalkableArea(1);
		hKnoepfe.Enabled = true;
  }
}


/****************************
*   Tür-Hotspot-Funktionen
****************************/
function hTuerEsszimmer_AnyClick()
{
	if ( any_click_on_door(4, oTuerEsszimmer, 87, 132, eDirUp, 3, 289, 120, eDirLeft) == 0 ) Unhandled ();
}

function hTuerWendy_AnyClick()
{
	if ( any_click_on_door(3, oTuerWendy, 287, 134, eDirRight, 1, 45, 125, eDirRight) == 0 ) Unhandled ();  
}


/****************************
*   Objekt-Funktionen
****************************/


/****************************
*   Hotspot-Funktionen
****************************/
function hFenster_AnyClick()
{
	if (any_click_move(33, 137, eDirLeft))
	{
		if (UsedAction(eActWalkTo))
		{
		//	Wait(5);
		}
		else if (UsedAction(eActLookAt))
		{
			Wait(5);
			player.Say("Von hier aus hat man einen perfekten Blick auf den Hinterhof der Nachbarn.");
		}
		else if (UsedAction(eActPickUp))
		{
			Wait(5);
			player.Say("Das Fenster ist im Rahmen festgemacht. Ich kann es nicht nehmen.");
		}
		else if (UsedAction(eActUse))
		{
			Wait(5);
			player.Say("Öffnen vielleicht?");
		}
		else if (UsedAction(eActOpen))
		{
			Wait(5);
			player.Say("Die Klimaanlage ist an.");
		}
		else if (UsedAction(eActClose))
		{
			Wait(5);
			player.Say("Das Fenster ist bereits geschlossen.");
		}
		else if (UsedAction(eActPull))
		{
			Wait(5);
			player.Say("Das Fenster ist im Rahmen festgemacht. Ich kann es nicht nehmen.");
		}
		else if (UsedAction(eActPush))
		{
			Wait(5);
			player.Say("Das Fenster ist im Rahmen festgemacht. Ich kann es nicht nehmen.");
		}
		else Unhandled();
	}
}

function hKnoepfe_AnyClick()
{
	if (any_click_move(150, 91, eDirUp))
	{
		if (UsedAction(eActWalkTo))
		{
		//	Wait(5);
		}
		else if (UsedAction(eActLookAt))
		{
			Wait(5);
			player.Say("Die steuern den Aufzug.");
		}
		else if (UsedAction(eActPickUp))
		{
			Wait(5);
			player.Say("Ich könnte die Kontrolltafel abnehmen. Aber dazu fehlt mir das Werkzeug.");
		}
		else if (UsedAction(eActUse))
		{
			Wait(5);
			dAufzug.Start();
		}
		else if (UsedAction(eActOpen))
		{
			Wait(5);
			player.Say("Ich könnte die Kontrolltafel abnehmen. Aber dazu fehlt mir das Werkzeug.");
		}
		else if (UsedAction(eActClose))
		{
			Wait(5);
			player.Say("Die Kontrolltafel ist bereits drauf.");
		}
		else if (UsedAction(eActPull))
		{
			Wait(5);
			player.Say("Die Knöpfe drückt man.");
		}
		else if (UsedAction(eActPush))
		{
			Wait(5);
			dAufzug.Start();
		}
		else Unhandled();
	}
}

function hRufknopf_AnyClick()
{
	if (any_click_move(149, 103, eDirUp))
	{
		if (UsedAction(eActWalkTo))
		{
		//	Wait(5);
		}
		else if (UsedAction(eActLookAt))
		{
			Wait(5);
			player.Say("Das ist der Rufknopf für den Aufzug.");
		}
		else if (UsedAction(eActPickUp))
		{
			Wait(5);
			player.Say("Ich könnte die Kontrolltafel abnehmen. Aber dazu fehlt mir das Werkzeug.");
		}
		else if (UsedAction(eActUse) || UsedAction(eActPush))
		{
			Wait(5);
			if( oAufzug.Graphic == 27 )
			{
				oAufzug.Clickable = false;
				oAufzug.Animate(0, 5, eOnce, eBlock);
				RestoreWalkableArea(1);
				hKnoepfe.Enabled = true;
			}
			else
			{
			}
		}
		else if (UsedAction(eActOpen))
		{
			Wait(5);
			player.Say("Ich könnte die Kontrolltafel abnehmen. Aber dazu fehlt mir das Werkzeug.");
		}
		else if (UsedAction(eActClose))
		{
			Wait(5);
			player.Say("Die Kontrolltafel ist bereits drauf.");
		}
		else if (UsedAction(eActPull))
		{
			Wait(5);
			player.Say("Die Knöpfe drückt man.");
		}
		else Unhandled();
	}
}

function oAufzug_AnyClick()
{
	if (any_click_move(158, 102, eDirUp))
	{
		if (UsedAction(eActWalkTo))
		{
		//	Wait(5);
		}
		else if (UsedAction(eActLookAt))
		{
			Wait(5);
			player.Say("Das ist der Aufzug.");
		}
		else if (UsedAction(eActPickUp))
		{
			Wait(5);
			player.Say("Dazu sitzt die Tür zu fest im Rahmen.");
		}
		else if (UsedAction(eActUse))
		{
			Wait(5);
			player.Say("Die Tür ist zu.");
		}
		else if (UsedAction(eActOpen))
		{
			Wait(5);
			aufz();
			// simuliere das Drücken auf den Rufknopf um alles ablaufen zu lassen
			hRufknopf.RunInteraction(eModeInteract);
		}
		else if (UsedAction(eActClose))
		{
			Wait(5);
			player.Say("Die ist doch schon zu.");
		}
		else if (UsedAction(eActPull))
		{
			Wait(5);
			player.Say("Und wie?");
		}
		else if (UsedAction(eActPush))
		{
			Wait(5);
			player.Say("Und wie?");
		}
		else Unhandled();
	}
}

function oTisch_AnyClick()
{
	if (any_click_move(275, 135, eDirLeft))
	{
		if (UsedAction(eActWalkTo))
		{
		//	Wait(5);
		}
		else if (UsedAction(eActLookAt))
		{
			Wait(5);
			player.Say("Ein kleiner Tisch.");
		}
		else if (UsedAction(eActPickUp))
		{
			Wait(5);
			player.Say("Der steht da ganz gut.");
		}
		else if (UsedAction(eActUse))
		{
			Wait(5);
			player.Say("Da drauf kann ich höchstens was belegen.");
		}
		else if (UsedAction(eActOpen))
		{
			Wait(5);
			player.Say("Wie kann ich einen Tisch öffnen?");
		}
		else if (UsedAction(eActClose))
		{
			Wait(5);
			player.Say("Wie kann ich einen Tisch schließen?");
		}
		else if (UsedAction(eActPull))
		{
			Wait(5);
			player.Say("Der steht da ganz gut.");
		}
		else if (UsedAction(eActPush))
		{
			Wait(5);
			player.Say("Der steht da ganz gut.");
		}
		else Unhandled();
	}
}


/****************************
*   Regionen-Funktionen
****************************/
function region1_WalksOnto()
{
	player.ChangeRoom(6, 255, 77);
}
